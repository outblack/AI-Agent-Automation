# 랭체인 기본 개념과 간단한 의사 결정 예제

- 이 문서는 랭체인 공식 가이드의 핵심 개념을 요약해, 빠르게 이해할 수 있도록 정리한 것입니다.
- 모든 설명은 한국어로 작성했으며, 읽기 쉽게 글머리 기호를 사용했습니다.

## 랭체인의 기본 개념

- **목적**
  - LLM 애플리케이션을 만들 때 필요한 프롬프트 관리, 체인 구성, 도구 호출, 메모리, 에이전트 실행을 체계적으로 다루기 위한 프레임워크입니다.
- **핵심 구성 요소**
  - **프롬프트(Template)**
    - 입력 변수를 구조화하고 재사용 가능한 형태로 관리합니다.
  - **모델(LLM/Chat Model)**
    - 텍스트 또는 대화형 모델을 호출해 응답을 생성합니다.
  - **체인(Chain)**
    - 프롬프트 → 모델 호출 → 후처리를 하나의 파이프라인으로 묶습니다.
  - **도구(Tools)**
    - 검색, 계산기, DB 조회 등 외부 기능을 호출하는 인터페이스입니다.
  - **에이전트(Agent)**
    - 도구를 선택하거나 호출 순서를 결정하는 “의사 결정 실행기” 역할을 합니다.
  - **메모리(Memory)**
    - 대화 맥락이나 사용자 정보를 저장해 다음 호출에 활용합니다.
- **공식 가이드에서 강조하는 흐름**
  - 문제 정의 → 프롬프트 설계 → 체인/에이전트 구성 → 도구 연결 → 반복적 평가 및 개선

## 간단한 의사 결정 예제 (의사 코드)

- 목적: 사용자 요청을 분류해 “검색” 또는 “계산” 도구를 선택하는 간단한 결정 흐름을 보여줍니다.
- 아래 코드는 랭체인 공식 가이드에서 소개하는 구성 개념을 바탕으로, 구조만 이해하기 쉽게 단순화한 예시입니다.

- **예제 흐름**
  - 입력: 사용자의 요청 문장
  - 분기: 질문이 정보 탐색인지, 계산인지 분류
  - 실행: 분류 결과에 맞는 도구 호출

```python
# 의사 코드: LangChain 스타일 구성(실행 가능한 최소 예제가 아닌 구조 설명용)

# 1) 프롬프트 정의
prompt = """
너는 요청을 분류하는 분류기야.
입력: {user_input}
출력: SEARCH 또는 CALC
"""

# 2) 모델 호출 (분류용)
classification = llm.invoke(prompt.format(user_input=user_input))

# 3) 의사 결정
if "SEARCH" in classification:
    result = search_tool.run(user_input)
else:
    result = calculator_tool.run(user_input)

# 4) 최종 응답 구성
final_answer = f"도구 결과: {result}"
```

## 작성 팁

- **프롬프트를 먼저 설계**하면, 체인과 에이전트 구성이 명확해집니다.
- **도구별 입력 포맷을 통일**하면, 에이전트의 의사 결정이 단순해집니다.
- **작은 체인부터 시작**해 점진적으로 메모리·도구·에이전트를 붙이는 방식이 효율적입니다.
